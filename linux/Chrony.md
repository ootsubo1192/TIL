# Chrony

ntpdに代わるNTPサーバー/クライアント

chronydはntpdに比べて、ネットワークの混雑が続いたり通信が不安定な状態でも良好に動作し、高い精度で時刻を同期できる。必要なときだけCPUを使用し、メモリ使用量も少ない。

設定ファイルは[/etc/chrony.conf]

### 主な設定項目

| 設定項目 | 説明 |
|:----|:----|
| server | 時刻を取得するNTPサーバーの指定 サーバー/クライアントの関係 |
| peer | 時刻を取得するNTPサーバーを指定 同じstratum(階層)同士 |
| pool | 時刻を取得するNTPサーバーのプール(複数のアドレスを集約した物)を指定 |
| driftfile | 自身の時刻のズレ具合を記録するファイルの指定 |
| rtcsync | システムクロックをハードウェアクロック(※RTC)にコピー |

### chronycコマンドでchronyd(デーモン)の管理を行う

| サブコマンド | 説明 |
|:---|:---|
| activity(活発な) | オンライン/オフラインのNTPサーバの数を表示 |
| sources(源) | 時刻のソースを表示 |
| sourcestats(源の統計) | 時刻のソースの統計情報を表示 |
| tracking(たどる) | トラッキング(時刻同期の詳細情報)を表示 |


---

- rtcsync -> デフォルトでは11分おきにシステムクロックがはドウェアクロックに反映される

- server -> 自身がクライアントでNTPサーバーに同期させてもらう関係

- 設定項目[server]の最後に[iburst]をつけると、起動直後にNTPサーバに対して短い間隔で4回問い合わせることで時刻同期を速める

- サブコマンドを指定せずにchronycコマンドを実行すると、対話モードで起動 

- ※RTC(Real Time Clock -> コンピュータに内蔵された、電池などで常に動作し続ける時計。電源オフでも止まらない
